<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Visual meditations on house prices, Part 4: graph gallery</title>
    
    <meta name="author" content="Len Kiefer">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link href="/assets/themes/lentheme/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    
    <link href="/assets/themes/lentheme/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    
    <link href="/assets/themes/lentheme/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    
    <link href="/assets/themes/lentheme/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    
    
    

    
    

    
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><span class="icon-home3" style="font-size:24px"> Len Kiefer</a></span>
        </div>

        
        <div class="collapse navbar-collapse" id="jb-navbar-collapse" style="font-size:24px">
          <ul class="nav navbar-nav" >
        <li><a href="/archive.html"><span class="icon-newspaper"> Posts</a></span></li>
            
         <li><a href="/resume.html"><span class="icon-profile"> Resume</span></a></li>
        <li><a href="/about.html"><span class="icon-user-tie"> About</span></a></li>
          </ul>
        </div>
      </nav>

      <div class="container">
        
<div class="page-header">
  <h1>Visual meditations on house prices, Part 4: graph gallery </h1>
</div>

<div class="row post-full">
  <div class="col-xs-12">
    <div class="date">
      <span>14 May 2016</span>
    </div>
    <div class="content">
      <h1 id="introduction">Introduction</h1>

<p>IN THIS POST we’ll collect several visualizations of house prices I’ve shared on Twitter the past few days and have a little discussion.  In <a href="/2016/05/08/visual-meditations-on-house-prices"><em>prior posts</em></a> I’ve also included code for some of these graphs, and the others are mostly straightforward extensions of the earlier examples.</p>

<p>This is Part 4 of my series of posts on visualizing house prices.  Below are the earlier posts that have data and R code for generating plots:</p>

<ul>
  <li><a href="/2016/05/08/visual-meditations-on-house-prices-part1">Part 1: data wrangling </a></li>
  <li><a href="/2016/05/08/visual-meditations-on-house-prices-part2">Part 2: sparklines and dots (animated) </a></li>
  <li><a href="/2016/05/10/visual-meditations-on-house-prices-part3">Part 3: bubbles and bounce </a></li>
</ul>

<p>There are some cases where I blended unemployment data from the <a href="http://www.bls.gov/">U.S. Bureau of Labor Statistics (BLS)</a> with the house price data. I’ve got some code that downloads BLS data directly from their webpage and merges it with the house price data. As that involves some additional data wrangling considerations we’ll cover that in a future post.</p>

<p>Let’s get to the graphs.</p>

<h2 id="the-data">The data</h2>

<p>Throughout, we’ll be looking at the <a href="http://www.freddiemac.com/finance/house_price_index.html">Freddie Mac House Price Index (FMHPI)</a> for the 50 states plus the District of Columbia and over 300 metros areas. The history of the U.S. index vs the 50 states plus D.C. and the history of the U.S. index vs over 300 metros are contained in the plots below:</p>

<h3 id="us-vs-states">U.S. vs States:</h3>

<p><img src="/img/charts_may_14_2016/hpigif1.gif" alt="Swoosh" /></p>

<p>And here’s an individual line plot for each of the 50 states:</p>

<p><img src="/img/charts_may_14_2016/hpiviz1.PNG" alt="Swoosh" /></p>

<p>And and animated gif version:</p>

<p><img src="/img/charts_may_14_2016/hpi_lines3.gif" alt="Swoosh" /></p>

<h3 id="us-vs-metros">U.S. vs Metros:</h3>

<p><img src="/img/charts_may_14_2016/hpigif2.gif" alt="Swoosh" /></p>

<p>We’ll be manipulating these series to create a variety of views on house prices.</p>

<h1 id="house-price-lollipop">House price lollipop</h1>

<p>A lollipop chart (<a href="https://rud.is/b/2016/04/07/geom_lollipop-by-the-chartettes/">link for R code</a>) is a special type of chart that connect a line segment to a dot. They combine the feature of dot plot that allows you to compare position with bar charts which allow you to compare length. We can use this chart to compare the position of house prices (their level) vs their change (their percent difference).
Here is one for the 50 states plus D.C. for March of 2016:</p>

<p><img src="/img/charts_may_14_2016/hpi1.PNG" alt="FMHPI dot 1" /></p>

<p>This chart shows the <a href="http://www.freddiemac.com/finance/house_price_index.html">Freddie Mac House Price Index (FMHPI)</a> for the 50 states plus the District of Columbia.  The dot corresponds to the value of the index in March of 2016.  The tail extends to the range of the minimum and maximum value in the last 12 months for the house price index in that state. Each state is color coded according to the percentage change in the house price index over the past 12 months.</p>

<p>Here’s an animated version of this chart, rolling through each month since January of 2000. Because the index is normalized at 100 in December of 2000 the dots all line up 12 frames. Then as we roll forward through the last decade and a half, we see states rise and fall through motion, the length of the tail, and color.</p>

<p><img src="/img/charts_may_8_2016/hpi_dots_state_redblue2.gif" alt="FMHPI Gif" /></p>

<p>Here’s another version of the chart, where I’ve added a pink box corresponding to the pre-2008 maximum in the FMHPI and the post-2008 minimum.</p>

<p><img src="/img/charts_may_14_2016/hpi2.jpg" alt="FMHPI 2" /></p>

<h2 id="swirly-pop">Swirly pop</h2>

<p>After I created this chart I realized that the y axis, where I’ve encoded state, doesn’t add any information. What if we added another dimension to the chart? Because the FMHPI is displayed on a log scale, the length of the segments corresponds to annual percentage changes (if the endpoints are the current month and 12 months ago). In the following chart, I encoded the percentage change in the y axis for over 300 metro areas:</p>

<p><img src="/img/Rfig/fig-hpi-scatter-w-marginal-1.svg" alt="plot of chunk fig-hpi-scatter-w-marginal" /></p>

<p>Here the vertical distance measures the annual percentage change in index, while the x axis measures the level of the index.  I’ve also added histograms to the x and y axis, capturing the relative frequency of observations.</p>

<p>After I created this chart I realized I was missing an opportunity.  I could extend the tail to the value from a year ago in both the x and y axis. Here’s the modified version, for March of each year since 2005:</p>

<p><img src="/img/Rfig/fig-rbswirl3-1.svg" alt="plot of chunk fig-rbswirl3" /></p>

<p>Animated version:</p>

<p><img src="/img/charts_may_10_2016/rbswirl2.gif" alt="Swoosh" /></p>

<h1 id="seasonality-in-house-prices">Seasonality in house prices</h1>

<p>If you study housing markets, you’ll quickly learn that seasonality is a big deal. Housing market activity varies widely throughout the year, be it home purchases or housing construction.  The chart below <a href="/2016/05/10/visual-meditations-on-house-prices-part3">which I blogged about last time</a> shows seasonal patterns in metro house prices.</p>

<p><img src="/img/charts_may_10_2016/metro_season.gif" alt="redblue dots" /></p>

<h1 id="house-price-and-unemployment">House Price and Unemployment</h1>

<p>I’ve made several graphs recently comparing the unemployment rate for a state or metro to house prices.</p>

<p>This one shows states and was compared to a bug:</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/lenkiefer">@lenkiefer</a> I love that it looks like a bug crawling around!</p>&mdash; Mara Averick (@dataandme) <a href="https://twitter.com/dataandme/status/730725574776229888">May 12, 2016</a></blockquote>

<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p><img src="/img/charts_may_14_2016/hpi_ur2.gif" alt="data pede" /></p>

<p>This one compares metros:</p>

<p><img src="/img/charts_may_14_2016/hpi_ur_metro3.gif" alt="tadpole" /></p>

<p>And here’s a panel version of the metro chart:</p>

<p><img src="/img/charts_may_14_2016/hpi_ur_metro_panel.gif" alt="tad panel" /></p>

<h1 id="correlation-of-metro-house-prices-and-us-index">Correlation of metro house prices and U.S. index</h1>

<p>Correlation of house price movements is an active area of research, with many researchers studying in depth the relationships between house price movements across areas. Here are some visualizations that demonstrate the correlations.</p>

<h3 id="metro-house-price-index-and-us-index">Metro house price index and U.S. index</h3>

<p><img src="/img/charts_may_14_2016/metro_us_corr.gif" alt="hpi corr" /></p>

<p>This gif compares each metro area (grouped by principal state) to the U.S. in terms of the index.  I’ve plotted the U.S. index on the x axis (using a log scale) and the metro index (using a log scale) on the y axis.  In general there’s fairly strong correlation, but some markets seem to permanently depart from the regression line.</p>

<p>Let’s consider Dallas and Los Angeles:</p>

<p><img src="/img/Rfig/fig-hpi-corr-1.svg" alt="plot of chunk fig-hpi-corr" /></p>

<p>In Dallas, there seem to be permanent departures from the solid regression line. Los Angeles on the other hand, seems to follow the national trend very closely (though the slope of the Los Angles line is well above the 45 degree line).</p>

<p>Let’s try to estimate it using the monthly percent change (at an annualized rate):</p>

<p><img src="/img/charts_may_14_2016/metro_us_hpa_corr.gif" alt="hpa corr" /></p>

<p>Again we can focus in on just Dallas and Los Angeles:</p>

<p><img src="/img/Rfig/fig-hpa-corr-1.svg" alt="plot of chunk fig-hpa-corr" /></p>

<p>Here we see that the points tend to cluster around the regression loan, but with very different slopes.  Dallas, which lies below the 45 degree line tends to experience house price growth that is subdued with respect to national trends.  Los Angeles, seems more responsive. Let’s examine these relationships across all the metros.</p>

<h2 id="regressions">Regressions</h2>

<p>In the plots below we compare the slope coefficient from each scatterplot.  We can quickly notice some regularities:</p>

<p><img src="/img/Rfig/fig-hpa-reg1-1.svg" alt="plot of chunk fig-hpa-reg1" /></p>

<p>Focus in on a four large states:</p>

<p><img src="/img/Rfig/fig-hpa-reg2-1.svg" alt="plot of chunk fig-hpa-reg2" /></p>

<p>All the metros in California and all but two in Florida have a coefficient greater than one, while all the metros in Pennsylvania and Texas have a coefficient less than one. This means that on average when house prices rise (fall) 3 percent for the U.S., California and Florida tend to rise (fall) more than 3 percent, while Pennsylvania and Texas tend to rise (fall) less than 3 percent.</p>

<h1 id="update-dot-plot-distribution"><em>Update</em> Dot plot distribution</h1>

<p>This plot shows the distribution of house price appreciation (month-over-month percent change) across each metro area compared to the U.S. index. Values that are appreciating (depreciating) are colored blue (red) and the orange line corresponds to the U.S. index for that month. I’ve written up instructions on how to make such a plot <a href="/2016/04/06/dot-plots-and-distributions">in an earlier post</a>.</p>

<p><img src="/img/charts_may_14_2016/metro_hpi_dots5.gif" alt="hpa dots" /></p>

<h1 id="conclusion">Conclusion</h1>

<p>There’s a lot of different visualization hers, but I wanted to collect them all in one place.  I’ve got several more ideas for visualizations of house price trends, and we’ll see them in a sequel.</p>


    </div>

    

    
  
    <hr>
    <ul class="pagination">
    
      <li class="prev"><a href="/2016/05/10/visual-meditations-on-house-prices-part3" title="Visual meditations on house prices, Part 3: bubbles and bounce">&laquo; Previous</a></li>
    
      <li><a href="/archive.html">Archive</a></li>
    
      <li class="next"><a href="/2016/05/15/mortgage-rates-some-perspective" title="Mortgage rates, some perspective">Next &raquo;</a></li>
    
    </ul>
    <hr>
    
  </div>
</div>



      </div>

    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2017 Len Kiefer
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>
       
    • <span vertical-align:bottom> <a href="https://twitter.com/lenkiefer" class="twitter-follow-button" data-show-count="false">•   Follow @lenkiefer</a>
  
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</span>
• <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/MemberProfile" data-id="https://www.linkedin.com/pub/leonard-kiefer/31/753/511" data-format="click" data-related="false" data-text="Leonard Kiefer"></script>
  • lenkiefer@hotmail.com
           </p>
      </div>
    </div>
    





<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66905937-1', 'auto');
  ga('send', 'pageview');

</script>

    
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes/lentheme/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>





