<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Visual meditations on house prices, Part 4: graph gallery &middot; Len Kiefer</title>
        <meta name="description" content="IntroductionIN THIS POST we’ll collect several visualizations of house prices I’ve shared on Twitter the past few days and have a little discussion. In prior posts I’ve also included code for some of these graphs, and the others are mostly straightforward extensions of the earlier examples.
This is Part 4 of my series of posts on visualizing house prices. Below are the earlier posts that have data and R code for generating plots:">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.27.1" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="stylesheet" href="http://lenkiefer.com/dist/styles.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        
    </head>
    <body>
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-66905937-1', 'auto');
ga('send', 'pageview');
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="Len Kiefer" href="http://lenkiefer.com/">Len Kiefer</a>
                            </h1>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" title="Twitter" href="https://twitter.com/lenkiefer">
                                <i class="fa fa-twitter"></i>
                            </a>
                        
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="LinkedIn" title="LinkedIn" href="https://www.linkedin.com/in/leonard-kiefer-51175331">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Email" title="Email" href="mailto:lenkiefer@hotmail.com">
                                <i class="fa fa-envelope"></i>
                            </a>
                        

                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Blog" href="/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a title="Topics" href="/tag/">Topics</a>
    </li>

    <li class="site-nav-item">
        <a title="Projects" href="/project/">Projects</a>
    </li>

    <li class="site-nav-item">
        <a title="About" href="/content/page/about/">About</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Visual meditations on house prices, Part 4: graph gallery</h1>
    
    <p class="post-date">
        <span>Published <time datetime="2016-05-14" itemprop="datePublished">Sat, May 14, 2016</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="https://google.com/&#43;XXX" itemprop="url" rel="author">Len Kiefer</a>
            </span>
        </span>
    </p>                 
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    <div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>IN THIS POST we’ll collect several visualizations of house prices I’ve shared on Twitter the past few days and have a little discussion. In <a href="../../../../2016/05/08/visual-meditations-on-house-prices"><em>prior posts</em></a> I’ve also included code for some of these graphs, and the others are mostly straightforward extensions of the earlier examples.</p>
<p>This is Part 4 of my series of posts on visualizing house prices. Below are the earlier posts that have data and R code for generating plots:</p>
<ul>
<li><a href="../../../../2016/05/08/visual-meditations-on-house-prices-part1">Part 1: data wrangling</a></li>
<li><a href="../../../../2016/05/08/visual-meditations-on-house-prices-part2">Part 2: sparklines and dots (animated)</a></li>
<li><a href="../../../../2016/05/10/visual-meditations-on-house-prices-part3">Part 3: bubbles and bounce</a></li>
</ul>
<p>There are some cases where I blended unemployment data from the <a href="http://www.bls.gov/">U.S. Bureau of Labor Statistics (BLS)</a> with the house price data. I’ve got some code that downloads BLS data directly from their webpage and merges it with the house price data. As that involves some additional data wrangling considerations we’ll cover that in a future post.</p>
<p>Let’s get to the graphs.</p>
<div id="the-data" class="section level2">
<h2>The data</h2>
<p>Throughout, we’ll be looking at the <a href="http://www.freddiemac.com/finance/house_price_index.html">Freddie Mac House Price Index (FMHPI)</a> for the 50 states plus the District of Columbia and over 300 metros areas. The history of the U.S. index vs the 50 states plus D.C. and the history of the U.S. index vs over 300 metros are contained in the plots below:</p>
<div id="u.s.-vs-states" class="section level3">
<h3>U.S. vs States:</h3>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpigif1.gif" alt="Swoosh"/></p>
<p>And here’s an individual line plot for each of the 50 states:</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpiviz1.PNG" alt="Swoosh"/></p>
<p>And and animated gif version:</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpi_lines3.gif" alt="Swoosh"/></p>
</div>
<div id="u.s.-vs-metros" class="section level3">
<h3>U.S. vs Metros:</h3>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpigif2.gif" alt="Swoosh"/></p>
<p>We’ll be manipulating these series to create a variety of views on house prices.</p>
</div>
</div>
</div>
<div id="house-price-lollipop" class="section level1">
<h1>House price lollipop</h1>
<p>A lollipop chart (<a href="https://rud.is/b/2016/04/07/geom_lollipop-by-the-chartettes/">link for R code</a>) is a special type of chart that connect a line segment to a dot. They combine the feature of dot plot that allows you to compare position with bar charts which allow you to compare length. We can use this chart to compare the position of house prices (their level) vs their change (their percent difference). Here is one for the 50 states plus D.C. for March of 2016:</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpi1.PNG" alt="FMHPI dot 1"/></p>
<p>This chart shows the <a href="http://www.freddiemac.com/finance/house_price_index.html">Freddie Mac House Price Index (FMHPI)</a> for the 50 states plus the District of Columbia. The dot corresponds to the value of the index in March of 2016. The tail extends to the range of the minimum and maximum value in the last 12 months for the house price index in that state. Each state is color coded according to the percentage change in the house price index over the past 12 months.</p>
<p>Here’s an animated version of this chart, rolling through each month since January of 2000. Because the index is normalized at 100 in December of 2000 the dots all line up 12 frames. Then as we roll forward through the last decade and a half, we see states rise and fall through motion, the length of the tail, and color.</p>
<p><img src="{{ site.url }}/img/charts_may_8_2016/hpi_dots_state_redblue2.gif" alt="FMHPI Gif"/></p>
<p>Here’s another version of the chart, where I’ve added a pink box corresponding to the pre-2008 maximum in the FMHPI and the post-2008 minimum.</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpi2.jpg" alt="FMHPI 2"/></p>
<div id="swirly-pop" class="section level2">
<h2>Swirly pop</h2>
<p>After I created this chart I realized that the y axis, where I’ve encoded state, doesn’t add any information. What if we added another dimension to the chart? Because the FMHPI is displayed on a log scale, the length of the segments corresponds to annual percentage changes (if the endpoints are the current month and 12 months ago). In the following chart, I encoded the percentage change in the y axis for over 300 metro areas:</p>
<p><img src="/post/2016-05-14-visual-meditations-on-house-prices-part4_files/figure-html/fig-hpi-scatter-w-marginal-1.png" width="816" /></p>
<p>Here the vertical distance measures the annual percentage change in index, while the x axis measures the level of the index. I’ve also added histograms to the x and y axis, capturing the relative frequency of observations.</p>
<p>After I created this chart I realized I was missing an opportunity. I could extend the tail to the value from a year ago in both the x and y axis. Here’s the modified version, for March of each year since 2005:</p>
<p><img src="/post/2016-05-14-visual-meditations-on-house-prices-part4_files/figure-html/fig-rbswirl3-1.png" width="768" /></p>
<p>Animated version:</p>
<p><img src="{{ site.url }}/img/charts_may_10_2016/rbswirl2.gif" alt="Swoosh"/></p>
</div>
</div>
<div id="seasonality-in-house-prices" class="section level1">
<h1>Seasonality in house prices</h1>
<p>If you study housing markets, you’ll quickly learn that seasonality is a big deal. Housing market activity varies widely throughout the year, be it home purchases or housing construction. The chart below <a href="../%202016-05-10-visual-meditations-on-house-prices-part3">which I blogged about last time</a> shows seasonal patterns in metro house prices.</p>
<p><img src="{{ site.url }}/img/charts_may_10_2016/metro_season.gif" alt="redblue dots"/></p>
</div>
<div id="house-price-and-unemployment" class="section level1">
<h1>House Price and Unemployment</h1>
<p>I’ve made several graphs recently comparing the unemployment rate for a state or metro to house prices.</p>
<p>This one shows states and was compared to a bug:</p>
<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">
<a href="https://twitter.com/lenkiefer"><span class="citation">@lenkiefer</span></a> I love that it looks like a bug crawling around!
</p>
— Mara Averick (<span class="citation">@dataandme</span>) <a href="https://twitter.com/dataandme/status/730725574776229888">May 12, 2016</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpi_ur2.gif" alt="data pede"/></p>
<p>This one compares metros:</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpi_ur_metro3.gif" alt="tadpole"/></p>
<p>And here’s a panel version of the metro chart:</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/hpi_ur_metro_panel.gif" alt="tad panel"/></p>
</div>
<div id="correlation-of-metro-house-prices-and-u.s.-index" class="section level1">
<h1>Correlation of metro house prices and U.S. index</h1>
<p>Correlation of house price movements is an active area of research, with many researchers studying in depth the relationships between house price movements across areas. Here are some visualizations that demonstrate the correlations.</p>
<div id="metro-house-price-index-and-u.s.-index" class="section level3">
<h3>Metro house price index and U.S. index</h3>
<p><img src="{{ site.url }}/img/charts_may_14_2016/metro_us_corr.gif" alt="hpi corr"/></p>
<p>This gif compares each metro area (grouped by principal state) to the U.S. in terms of the index. I’ve plotted the U.S. index on the x axis (using a log scale) and the metro index (using a log scale) on the y axis. In general there’s fairly strong correlation, but some markets seem to permanently depart from the regression line.</p>
<p>Let’s consider Dallas and Los Angeles:</p>
<p><img src="/post/2016-05-14-visual-meditations-on-house-prices-part4_files/figure-html/fig-hpi-corr-1.png" width="672" /></p>
<p>In Dallas, there seem to be permanent departures from the solid regression line. Los Angeles on the other hand, seems to follow the national trend very closely (though the slope of the Los Angles line is well above the 45 degree line).</p>
<p>Let’s try to estimate it using the monthly percent change (at an annualized rate):</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/metro_us_hpa_corr.gif" alt="hpa corr"/></p>
<p>Again we can focus in on just Dallas and Los Angeles:</p>
<p><img src="/post/2016-05-14-visual-meditations-on-house-prices-part4_files/figure-html/fig-hpa-corr-1.png" width="672" /></p>
<p>Here we see that the points tend to cluster around the regression loan, but with very different slopes. Dallas, which lies below the 45 degree line tends to experience house price growth that is subdued with respect to national trends. Los Angeles, seems more responsive. Let’s examine these relationships across all the metros.</p>
</div>
<div id="regressions" class="section level2">
<h2>Regressions</h2>
<p>In the plots below we compare the slope coefficient from each scatterplot. We can quickly notice some regularities:</p>
<p><img src="/post/2016-05-14-visual-meditations-on-house-prices-part4_files/figure-html/fig-hpa-reg1-1.png" width="912" /></p>
<p>Focus in on a four large states:</p>
<p><img src="/post/2016-05-14-visual-meditations-on-house-prices-part4_files/figure-html/fig-hpa-reg2-1.png" width="912" /></p>
<p>All the metros in California and all but two in Florida have a coefficient greater than one, while all the metros in Pennsylvania and Texas have a coefficient less than one. This means that on average when house prices rise (fall) 3 percent for the U.S., California and Florida tend to rise (fall) more than 3 percent, while Pennsylvania and Texas tend to rise (fall) less than 3 percent.</p>
</div>
</div>
<div id="update-dot-plot-distribution" class="section level1">
<h1><em>Update</em> Dot plot distribution</h1>
<p>This plot shows the distribution of house price appreciation (month-over-month percent change) across each metro area compared to the U.S. index. Values that are appreciating (depreciating) are colored blue (red) and the orange line corresponds to the U.S. index for that month. I’ve written up instructions on how to make such a plot <a href="../%202016-04-06-dot-plots-and-distributions">in an earlier post</a>.</p>
<p><img src="{{ site.url }}/img/charts_may_14_2016/metro_hpi_dots5.gif" alt="hpa dots"/></p>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>There’s a lot of different visualization hers, but I wanted to collect them all in one place. I’ve got several more ideas for visualizations of house price trends, and we’ll see them in a sequel.</p>
</div>

</div>

        <footer class="post-footer clearfix">
    
        <p class="post-tags">
            <span>Tagged:</span>
            
            
                <a href="/tags/dataviz/">dataviz</a>, 
            
                <a href="/tags/house-prices/">House prices</a>
            
        </p>
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?text=Visual%20meditations%20on%20house%20prices%2c%20Part%204%3a%20graph%20gallery via %40lenkiefer&url=http%3a%2f%2flenkiefer.com%2f2016%2f05%2f14%2fvisual-meditations-on-house-prices-part4%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flenkiefer.com%2f2016%2f05%2f14%2fvisual-meditations-on-house-prices-part4%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        

        
            <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2flenkiefer.com%2f2016%2f05%2f14%2fvisual-meditations-on-house-prices-part4%2f"
              onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
              <i class="fa fa-google-plus"></i>
                <span class="hidden">Google+</span>
            </a>
        
        
            <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&title=Visual%20meditations%20on%20house%20prices%2c%20Part%204%3a%20graph%20gallery&url=http%3a%2f%2flenkiefer.com%2f2016%2f05%2f14%2fvisual-meditations-on-house-prices-part4%2f&summary="
               onclick="window.open(this.href, 'linkedin-share', 'width=554,height=481');return false;">
               <i class="fa fa-linkedin"></i>
               <span class="hidden">LinkedIn</span>
            </a>
        
    </div>
</footer>

        
    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="Len Kiefer" href="http://lenkiefer.com/">Len Kiefer</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; Len Kiefer 2017 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright" style="font-size:50%;">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a> (modified by Len Kiefer)</span>
                </p>
            </div>
        </footer>

        <script src="http://lenkiefer.com/js/jquery-1.11.3.min.js"></script>
        <script src="http://lenkiefer.com/js/jquery.fitvids.js"></script>
        
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        
        
        <script src="http://lenkiefer.com/js/scripts.js"></script>
    </body>
</html>

