<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Consumer Credit Trends &middot; Len Kiefer</title>
        <meta name="description" content="TODAY the NEW YORK FEDERAL RESERVE BANK released its Quarterly Report on Household Debt and Credit. These data come from the Center for Microeconomic Data based on credit records from Equifax.
R code for the graphs are posted at bottom of page
Trends in household debt balances One of the key statistics tracked in the report (full data can be found here) is household debt balances. They break debt balances out by loan type:">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.27.1" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="stylesheet" href="http://lenkiefer.com/dist/styles.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        
    </head>
    <body>
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-66905937-1', 'auto');
ga('send', 'pageview');
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="Len Kiefer" href="http://lenkiefer.com/">Len Kiefer</a>
                            </h1>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" title="Twitter" href="https://twitter.com/lenkiefer">
                                <i class="fa fa-twitter"></i>
                            </a>
                        
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="LinkedIn" title="LinkedIn" href="https://www.linkedin.com/in/leonard-kiefer-51175331">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Email" title="Email" href="mailto:lenkiefer@hotmail.com">
                                <i class="fa fa-envelope"></i>
                            </a>
                        

                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Blog" href="/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a title="Topics" href="/tag/">Topics</a>
    </li>

    <li class="site-nav-item">
        <a title="Projects" href="/project/">Projects</a>
    </li>

    <li class="site-nav-item">
        <a title="About" href="/content/page/about/">About</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Consumer Credit Trends</h1>
    
    <p class="post-date">
        <span>Published <time datetime="2016-08-09" itemprop="datePublished">Tue, Aug 9, 2016</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="https://google.com/&#43;XXX" itemprop="url" rel="author">Len Kiefer</a>
            </span>
        </span>
    </p>                 
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    

<p>TODAY the NEW YORK FEDERAL RESERVE BANK <a href="https://www.newyorkfed.org/newsevents/news/research/2016/rp160809">released</a> its Quarterly Report on Household Debt and Credit. These data come from the <a href="https://www.newyorkfed.org/microeconomics/ccp.html">Center for Microeconomic Data</a> based on credit records from Equifax.</p>

<p><strong>R code for the graphs are posted at bottom of page</strong></p>

<h1 id="trends-in-household-debt-balances">Trends in household debt balances</h1>

<p>One of the key statistics tracked in the report (full data can be found <a href="https://www.newyorkfed.org/microeconomics/data.html">here</a>) is household debt balances. They break debt balances out by loan type:</p>

<ul>
<li>mortgage debt</li>
<li>student loans</li>
<li>auto loans</li>
<li>credit cards</li>
<li>home equity revolving debt</li>
<li>other debt</li>
</ul>

<p>Mortgage debt is by far the largest component of household debt. Out of the $12.3 trillion in debt in  2016Q2, mortgage debt comprises $8.4 trillion per the FRBNY Consumer Credit Panel. From 2003Q1 through 2016Q2 mortgage debt has ranged from 68% to 74% of total debt balances.</p>

<p>If you take away mortgage debt you can more easily compare the trends in other forms of household debt.</p>

<p><img src="/img/Rfig/debt-2016q2-levels-1.svg" alt="plot of chunk debt-2016q2-levels" /></p>

<p>While most forms of debt rose, fell and recovered leading up to, during, and after the Great Recession, student debt has pretty much gone up in a straight line.</p>

<p>If you use an index so that 2003Q1 = 100, you can include mortgage and total debt:</p>

<p><img src="/img/Rfig/debt-2016q2-index-1.svg" alt="plot of chunk debt-2016q2-index" /></p>

<p>The trend is striking, but I think it jumps out at you even more if you use an animated gif:</p>

<p><img src="../../../../img/charts_aug_9_2016/debt balances 2016Q2.gif" alt="credit gif"/></p>

<h1 id="state-per-capita-debt-trends">State per capita debt trends</h1>

<p>The panel also reports on per capita household debt by select states.  In general per capita debt levels have stabilized after falling during the Great Recession.  The debt trends are diven primarily by mortgage debt, so states with volatile house prices and high rates of foreclosure (<em>e.g.</em> AZ, FL, NV) have had the greatest volatility in per capita debt levels.</p>

<p>But in recent quarters most states are trending modestly higher.</p>

<p><img src="/img/Rfig/debt-2016q2-states-1.svg" alt="plot of chunk debt-2016q2-states" /></p>

<h2 id="code-for-plots">Code for plots</h2>

<p>If you&rsquo;ve read some of my earlier posts <a href="../../../../2016/05/08/visual-meditations-on-house-prices">here</a> and
<a href="../../../../2016/06/26/week-in-review">here</a> then generating these plots is rather strightforward.</p>

<p>I have been meaning to do more data wrangling in R, but I&rsquo;m still falling back on Excel tricks.</p>

<p>For the first three plots I&rsquo;ve collected my data in a text file called <em>debt2016q2.txt</em>. The datafile has four columns and looks like:</p>

<p><img src="../../../../img/charts_aug_9_2016/datalayout.PNG" alt="data layout"/></p>

<p>For the state level data I have another data file with a similar format called <em>pcdebt2016q2.txt</em>:</p>

<p><img src="../../../../img/charts_aug_9_2016/datalayout2.PNG" alt="data layout"/></p>

<p>Using these data files we can generate the plots using the following code:</p>

<p>{% highlight r
#Set up libraries
  library(ggplot2)
  library(scales)
  library(animation)
  library(ggthemes)
  library(data.table)
  library(ggrepel)</p>

<p>#Load data
data &lt;- fread(&ldquo;data/debt2016q2.txt&rdquo;)
data$date&lt;-as.Date(data$date, format=&ldquo;%m/%d/%Y&rdquo;)</p>

<p>dlist&lt;-unique(data$date)  #unique set of dates
N&lt;-length(dlist)  #number of dates</p>

<p>#Create static plots:</p>

<h1 id="in-levels">In levels</h1>

<p>ggplot(data=data[type !=&ldquo;Total&rdquo; &amp; type !=&ldquo;Mortgage&rdquo;,],aes(x=date,y=debt,color=type,label=type))+  #exclude mortgage and total lines</p>

<p>geom_line(size=1.2)+ #add lines
  geom_text_repel(data=data[date==dlist[N] &amp; type != &ldquo;Total&rdquo;&amp; type !=&ldquo;Mortgage&rdquo;,],nudge_x=10,nudge_y=.025)+ #add labels at end</p>

<pre><code>#style plot:
theme_minimal()+ #use minimal theme from ggthemes library

theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),&quot;cm&quot;))+
  coord_cartesian(xlim=c(as.Date(&quot;2003-01-01&quot;),as.Date(&quot;2017-03-30&quot;)))+
theme(legend.position=&quot;none&quot;)+
labs(title=&quot;Household debt balances&quot;,
     subtitle=&quot;Trillions of Dollars&quot;,
     x=&quot;&quot;,y=&quot;&quot;,caption=&quot;@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax&quot;)
</code></pre>

<h1 id="using-indexed-data">Using indexed data</h1>

<p>ggplot(data=data,aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+
    geom_text_repel(data=data[date==dlist[N],],nudge_x=10,nudge_y=.025)+  #add labels at end</p>

<pre><code>scale_y_continuous(breaks=seq(0,550,50))+ #set axis

coord_cartesian(xlim=c(as.Date(&quot;2003-01-01&quot;),as.Date(&quot;2017-03-30&quot;)), y=c(0,550))+

#style plot:
theme_minimal()+  #use minimal theme from ggthemes library
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),&quot;cm&quot;))+
theme(legend.position=&quot;none&quot;)+
labs(title=&quot;Household debt balances&quot;,
     subtitle=&quot;Index (2003 Q1 = 100)&quot;,
     x=&quot;&quot;,y=&quot;&quot;,caption=&quot;@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax&quot;)
</code></pre>

<p>#Create animated gif</p>

<p>oopt = ani.options(interval = 0.15)
saveGIF({for (i in 5:N) {
  g&lt;-
    ggplot(data=data[date&lt;=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
    geom_text_repel(data=data[date==dlist[i],],nudge_x=10,nudge_y=.025)+
    scale_y_continuous(breaks=seq(0,550,50))+
    coord_cartesian(xlim=c(as.Date(&ldquo;2003-01-01&rdquo;),as.Date(&ldquo;2017-03-30&rdquo;)), y=c(0,550))+
    theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
    theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),&ldquo;cm&rdquo;))+
    theme(legend.position=&ldquo;none&rdquo;)+
    labs(title=&ldquo;Household debt balances&rdquo;,
         subtitle=&ldquo;Index (2003 Q1 = 100)&rdquo;,
         x=&ldquo;&rdquo;,y=&ldquo;&rdquo;,caption=&ldquo;@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax&rdquo;)</p>

<pre><code>print(g)
ani.pause()
</code></pre>

<p>}
  #pause at end
  for (i2 in 1:10) {
    print(g)
    ani.pause()
  }
},movie.name=&ldquo;debt balances 2016Q2.gif&rdquo;,ani.width = 740, ani.height = 550)</p>

<h1 id="create-state-plot">Create state plot:</h1>

<h1 id="load-state-data">load state data</h1>

<p>sdata &lt;- fread(&ldquo;data/pcdebt2016q2.txt&rdquo;)
sdata$date&lt;-as.Date(sdata$date, format=&ldquo;%m/%d/%Y&rdquo;)</p>

<p>dslist&lt;-unique(sdata$date)  #unique set of dates
Ns&lt;-length(dlist)  #number of dates</p>

<p>ggplot(data=sdata,aes(x=date,y=pcdebt,color=state,label=round(pcdebt,0)))+geom_line(size=1.2)+theme_minimal()+
  geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
    facet_wrap(~state,ncol=3)  +
  scale_y_log10(limits=c(20,90),breaks=seq(25,90,15))+
    theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
    theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),&ldquo;cm&rdquo;))+
      coord_cartesian(xlim=c(as.Date(&ldquo;2003-01-01&rdquo;),as.Date(&ldquo;2017-03-30&rdquo;)))+
    theme(legend.position=&ldquo;none&rdquo;)+
    labs(title=&ldquo;Per capita household debt&rdquo;,
         subtitle=&ldquo;Thousands of dollars, (Based on the population with a credit report) &ldquo;,
         x=&ldquo;&rdquo;,y=&ldquo;per capita debt (Ths $, log scale)&rdquo;,caption=&ldquo;@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax&rdquo;)
{% endhighlight</p>

</div>

        <footer class="post-footer clearfix">
    
        <p class="post-tags">
            <span>Tagged:</span>
            
            
                <a href="/tags/dataviz/">dataviz</a>, 
            
                <a href="/tags/economy/">economy</a>, 
            
                <a href="/tags/r/">R</a>, 
            
                <a href="/tags/animation/">animation</a>, 
            
                <a href="/tags/data-wrangling/">data wrangling</a>
            
        </p>
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?text=Consumer%20Credit%20Trends via %40lenkiefer&url=http%3a%2f%2flenkiefer.com%2f2016%2f08%2f09%2ftrends-in-credit%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flenkiefer.com%2f2016%2f08%2f09%2ftrends-in-credit%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        

        
            <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2flenkiefer.com%2f2016%2f08%2f09%2ftrends-in-credit%2f"
              onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
              <i class="fa fa-google-plus"></i>
                <span class="hidden">Google+</span>
            </a>
        
        
            <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&title=Consumer%20Credit%20Trends&url=http%3a%2f%2flenkiefer.com%2f2016%2f08%2f09%2ftrends-in-credit%2f&summary="
               onclick="window.open(this.href, 'linkedin-share', 'width=554,height=481');return false;">
               <i class="fa fa-linkedin"></i>
               <span class="hidden">LinkedIn</span>
            </a>
        
    </div>
</footer>

        
    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="Len Kiefer" href="http://lenkiefer.com/">Len Kiefer</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; Len Kiefer 2017 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright" style="font-size:50%;">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a> (modified by Len Kiefer)</span>
                </p>
            </div>
        </footer>

        <script src="http://lenkiefer.com/js/jquery-1.11.3.min.js"></script>
        <script src="http://lenkiefer.com/js/jquery.fitvids.js"></script>
        
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        
        
        <script src="http://lenkiefer.com/js/scripts.js"></script>
    </body>
</html>

